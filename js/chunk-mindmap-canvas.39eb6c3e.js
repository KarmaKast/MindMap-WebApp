(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-mindmap-canvas"],{"00fd":function(t,e,n){var i=n("9e69"),a=Object.prototype,s=a.hasOwnProperty,r=a.toString,o=i?i.toStringTag:void 0;function c(t){var e=s.call(t,o),n=t[o];try{t[o]=void 0;var i=!0}catch(c){}var a=r.call(t);return i&&(e?t[o]=n:delete t[o]),a}t.exports=c},"03dd":function(t,e,n){var i=n("eac5"),a=n("57a5"),s=Object.prototype,r=s.hasOwnProperty;function o(t){if(!i(t))return a(t);var e=[];for(var n in Object(t))r.call(t,n)&&"constructor"!=n&&e.push(n);return e}t.exports=o},"07c7":function(t,e){function n(){return!1}t.exports=n},"087d":function(t,e){function n(t,e){var n=-1,i=e.length,a=t.length;while(++n<i)t[a+n]=e[n];return t}t.exports=n},"0b07":function(t,e,n){var i=n("34ac"),a=n("3698");function s(t,e){var n=a(t,e);return i(n)?n:void 0}t.exports=s},"0d24":function(t,e,n){(function(t){var i=n("2b3e"),a=n("07c7"),s=e&&!e.nodeType&&e,r=s&&"object"==typeof t&&t&&!t.nodeType&&t,o=r&&r.exports===s,c=o?i.Buffer:void 0,u=c?c.isBuffer:void 0,h=u||a;t.exports=h}).call(this,n("62e4")(t))},1290:function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},1310:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},1368:function(t,e,n){var i=n("da03"),a=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function s(t){return!!a&&a in t}t.exports=s},"1a8c":function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},"1c3c":function(t,e,n){var i=n("9e69"),a=n("2474"),s=n("9638"),r=n("a2be"),o=n("edfa"),c=n("ac41"),u=1,h=2,l="[object Boolean]",d="[object Date]",v="[object Error]",p="[object Map]",f="[object Number]",g="[object RegExp]",y="[object Set]",b="[object String]",x="[object Symbol]",_="[object ArrayBuffer]",m="[object DataView]",E=i?i.prototype:void 0,w=E?E.valueOf:void 0;function j(t,e,n,i,E,j,S){switch(n){case m:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!j(new a(t),new a(e)));case l:case d:case f:return s(+t,+e);case v:return t.name==e.name&&t.message==e.message;case g:case b:return t==e+"";case p:var C=o;case y:var D=i&u;if(C||(C=c),t.size!=e.size&&!D)return!1;var z=S.get(t);if(z)return z==e;i|=h,S.set(t,e);var O=r(C(t),C(e),i,E,j,S);return S["delete"](t),O;case x:if(w)return w.call(t)==w.call(e)}return!1}t.exports=j},"1cec":function(t,e,n){var i=n("0b07"),a=n("2b3e"),s=i(a,"Promise");t.exports=s},"1efc":function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},"1fc8":function(t,e,n){var i=n("4245");function a(t,e){var n=i(this,t),a=n.size;return n.set(t,e),this.size+=n.size==a?0:1,this}t.exports=a},2474:function(t,e,n){var i=n("2b3e"),a=i.Uint8Array;t.exports=a},2478:function(t,e,n){var i=n("4245");function a(t){return i(this,t).get(t)}t.exports=a},2524:function(t,e,n){var i=n("6044"),a="__lodash_hash_undefined__";function s(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?a:e,this}t.exports=s},2532:function(t,e,n){"use strict";var i=n("23e7"),a=n("5a34"),s=n("1d80"),r=n("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"253c":function(t,e,n){var i=n("3729"),a=n("1310"),s="[object Arguments]";function r(t){return a(t)&&i(t)==s}t.exports=r},"28c9":function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},"29f3":function(t,e){var n=Object.prototype,i=n.toString;function a(t){return i.call(t)}t.exports=a},"2b3e":function(t,e,n){var i=n("585a"),a="object"==typeof self&&self&&self.Object===Object&&self,s=i||a||Function("return this")();t.exports=s},"2d7c":function(t,e){function n(t,e){var n=-1,i=null==t?0:t.length,a=0,s=[];while(++n<i){var r=t[n];e(r,n,t)&&(s[a++]=r)}return s}t.exports=n},"2fcc":function(t,e){function n(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}t.exports=n},"30c9":function(t,e,n){var i=n("9520"),a=n("b218");function s(t){return null!=t&&a(t.length)&&!i(t)}t.exports=s},"32f4":function(t,e,n){var i=n("2d7c"),a=n("d327"),s=Object.prototype,r=s.propertyIsEnumerable,o=Object.getOwnPropertySymbols,c=o?function(t){return null==t?[]:(t=Object(t),i(o(t),(function(e){return r.call(t,e)})))}:a;t.exports=c},"34ac":function(t,e,n){var i=n("9520"),a=n("1368"),s=n("1a8c"),r=n("dc57"),o=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,u=Function.prototype,h=Object.prototype,l=u.toString,d=h.hasOwnProperty,v=RegExp("^"+l.call(d).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(t){if(!s(t)||a(t))return!1;var e=i(t)?v:c;return e.test(r(t))}t.exports=p},3698:function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},3729:function(t,e,n){var i=n("9e69"),a=n("00fd"),s=n("29f3"),r="[object Null]",o="[object Undefined]",c=i?i.toStringTag:void 0;function u(t){return null==t?void 0===t?o:r:c&&c in Object(t)?a(t):s(t)}t.exports=u},"39ff":function(t,e,n){var i=n("0b07"),a=n("2b3e"),s=i(a,"WeakMap");t.exports=s},4245:function(t,e,n){var i=n("1290");function a(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}t.exports=a},4284:function(t,e){function n(t,e){var n=-1,i=null==t?0:t.length;while(++n<i)if(e(t[n],n,t))return!0;return!1}t.exports=n},"42a2":function(t,e,n){var i=n("b5a7"),a=n("79bc"),s=n("1cec"),r=n("c869"),o=n("39ff"),c=n("3729"),u=n("dc57"),h="[object Map]",l="[object Object]",d="[object Promise]",v="[object Set]",p="[object WeakMap]",f="[object DataView]",g=u(i),y=u(a),b=u(s),x=u(r),_=u(o),m=c;(i&&m(new i(new ArrayBuffer(1)))!=f||a&&m(new a)!=h||s&&m(s.resolve())!=d||r&&m(new r)!=v||o&&m(new o)!=p)&&(m=function(t){var e=c(t),n=e==l?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case g:return f;case y:return h;case b:return d;case x:return v;case _:return p}return e}),t.exports=m},"49f4":function(t,e,n){var i=n("6044");function a(){this.__data__=i?i(null):{},this.size=0}t.exports=a},"50d8":function(t,e){function n(t,e){var n=-1,i=Array(t);while(++n<t)i[n]=e(n);return i}t.exports=n},"55a3":function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},"57a5":function(t,e,n){var i=n("91e9"),a=i(Object.keys,Object);t.exports=a},"585a":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("c8ba"))},"5e2e":function(t,e,n){var i=n("28c9"),a=n("69d5"),s=n("b4c0"),r=n("fba5"),o=n("67ca0");function c(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype["delete"]=a,c.prototype.get=s,c.prototype.has=r,c.prototype.set=o,t.exports=c},6044:function(t,e,n){var i=n("0b07"),a=i(Object,"create");t.exports=a},"60da":function(t,e,n){"use strict";var i=n("83ab"),a=n("d039"),s=n("df75"),r=n("7418"),o=n("d1e7"),c=n("7b0b"),u=n("44ad"),h=Object.assign,l=Object.defineProperty;t.exports=!h||a((function(){if(i&&1!==h({b:1},h(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),a="abcdefghijklmnopqrst";return t[n]=7,a.split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||s(h({},e)).join("")!=a}))?function(t,e){var n=c(t),a=arguments.length,h=1,l=r.f,d=o.f;while(a>h){var v,p=u(arguments[h++]),f=l?s(p).concat(l(p)):s(p),g=f.length,y=0;while(g>y)v=f[y++],i&&!d.call(p,v)||(n[v]=p[v])}return n}:h},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"63ea":function(t,e,n){var i=n("c05f");function a(t,e){return i(t,e)}t.exports=a},6747:function(t,e){var n=Array.isArray;t.exports=n},"67ca0":function(t,e,n){var i=n("cb5a");function a(t,e){var n=this.__data__,a=i(n,t);return a<0?(++this.size,n.push([t,e])):n[a][1]=e,this}t.exports=a},"69d5":function(t,e,n){var i=n("cb5a"),a=Array.prototype,s=a.splice;function r(t){var e=this.__data__,n=i(e,t);if(n<0)return!1;var a=e.length-1;return n==a?e.pop():s.call(e,n,1),--this.size,!0}t.exports=r},"6fcd":function(t,e,n){var i=n("50d8"),a=n("d370"),s=n("6747"),r=n("0d24"),o=n("c098"),c=n("73ac"),u=Object.prototype,h=u.hasOwnProperty;function l(t,e){var n=s(t),u=!n&&a(t),l=!n&&!u&&r(t),d=!n&&!u&&!l&&c(t),v=n||u||l||d,p=v?i(t.length,String):[],f=p.length;for(var g in t)!e&&!h.call(t,g)||v&&("length"==g||l&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,f))||p.push(g);return p}t.exports=l},"72e0":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"touch",rawName:"v-touch:moving",value:t.getMousePos,expression:"getMousePos",arg:"moving"},{name:"touch",rawName:"v-touch:end.prevent",value:t.deactivateAllEntities,expression:"deactivateAllEntities",arg:"end",modifiers:{prevent:!0}},{name:"touch",rawName:"v-touch:start.self",value:t.startCanvasDragging,expression:"startCanvasDragging",arg:"start",modifiers:{self:!0}},{name:"touch",rawName:"v-touch:end.self",value:t.endCanvasDragging,expression:"endCanvasDragging",arg:"end",modifiers:{self:!0}},{name:"touch",rawName:"v-touch:tap.self",value:t.handleCanvasTap,expression:"handleCanvasTap",arg:"tap",modifiers:{self:!0}}],ref:"canvasContainer",style:t.canvasContainerStyle,attrs:{id:"canvasContainer"},on:{mousemove:t.getMousePos,mouseleave:t.endCanvasDragging}},[n("div",{staticClass:"canvas-grid",style:{pointerEvents:"none",position:"absolute"}},[n("v-stage",{attrs:{config:{width:t.canvasSize.width,height:t.canvasSize.height}}},[n("v-layer",[n("v-group",{attrs:{config:t.canvasGridStyle}},[t._l(new Array(parseInt(t.canvasSize.width/t.grid.size)),(function(e,i){return n("v-line",{key:i+"vertical",attrs:{config:{points:[i*t.grid.size*2,0,i*t.grid.size*2,t.canvasSize.height+2*t.grid.size*2],stroke:t.canvasGridColors[0],strokeWidth:t.grid.width,lineCap:"round",lineJoin:"round",draggable:!1,closed:!1}}})})),t._l(new Array(parseInt(t.canvasSize.width/t.grid.size)),(function(e,i){return n("v-line",{key:i+"horizontal",attrs:{config:{points:[0,i*t.grid.size*2,t.canvasSize.width+2*t.grid.size*2,i*t.grid.size*2],stroke:t.canvasGridColors[0],strokeWidth:t.grid.width,lineCap:"round",lineJoin:"round",draggable:!1,closed:!1}}})}))],2),n("v-line",{attrs:{config:{points:[t.canvasSize.width/2,0,t.canvasSize.width/2,t.canvasSize.height],stroke:t.canvasGridColors[1],x:this.canvasLocation.x,draggable:!1,closed:!1}}}),n("v-line",{attrs:{config:{points:[0,t.canvasSize.height/2,t.canvasSize.width,t.canvasSize.height/2],stroke:t.canvasGridColors[2],y:this.canvasLocation.y,draggable:!1,closed:!1}}})],1)],1)],1),n("div",{style:t.entitiesStyle,attrs:{id:"entities"}},t._l(t.processedEntitiesBetter,(function(e,i){return n("entityComponent",{key:i,attrs:{colors:t.colors,colorsProcessed:t.colorsProcessed,entityID:i,apiUrl:t.apiUrl,autoSave:!1,apiValidity:t.apiValidity,canvasSize:t.canvasSize,canvasLocation:t.canvasLocation,canvasMousePos:e.canvasMousePos,dragging:e.dragging,pressed:e.pressed,entitySelected:e.entitySelected,entityLocationDef:e.entityLocationDef,grid:t.grid,relationLabels:t.collection.Relations,targetRelSpots:e.targetRelSpots,updateEntityData:e.updateEntityData},on:{setStartingCanvasMousePos:t.setStartingCanvasMousePos,prevActiveEntityID:t.setPrevActiveEntityID,removeEntity:t.removeEntity,entityActivated:t.entityActivated,setSelfRelSpots:function(e){return t.setSelfRelSpots(i,e)},assignTargetRelSpots:function(e){return t.assignTargetRelSpots(i,e)},getRelation:t.emitGetRelation}})})),1)])},a=[],s=(n("e260"),n("cca6"),n("e6cf"),n("2532"),n("2ca0"),n("ddb0"),n("2b0e")),r=n("bc3a"),o=n.n(r),c=n("b383"),u=n.n(c),h=n("63ea"),l=n.n(h),d={name:"MindMapCanvas",components:{entityComponent:()=>n.e("chunk-entity-component").then(n.bind(null,"fde5"))},props:{colors:Object,colorsProcessed:Object,collection:Object,entityLimit:{default:10,type:Number},apiUrl:String,apiValidity:Boolean,grid:{default(){return{size:1,opacity:0,width:0,show:!0,snap:!0}},type:Object},popupLock:{default:!0,type:Boolean}},data:function(){return{mindmapCanvas:null,dragItemId:null,canvasLocation:{x:0,y:0},canvasMousePos:{x:0,y:0},canvasContainerBoxLoc:{x:0,y:0},prevActiveEntityID:void 0,activeEntity:{entityID:void 0,dragging:{state:!1},pressed:{state:!1},selected:!1},canvas:{taps:{timer:void 0,count:0},dragging:{state:!1,event:void 0,deltas:{x:0,y:0}}},relClaimTargetSpots:{},relClaimSpots:{},entitiesToUpdate:[],processedEntitiesBetter:{},canvasSize:{height:0,width:0}}},computed:{windowSize:function(){let t=this.$store.state.window_height,e=this.$store.state.window_width;return{height:t||0,width:e||0}},entitiesStyle:function(){return{transform:`translate(\n          ${this.canvasLocation.x+"px"},\n          ${this.canvasLocation.y+"px"}\n        )`}},canvasContainerStyle:function(){return{height:"100%",width:"100%",position:"absolute",top:"0px",left:"0px",overflow:"hidden",backgroundColor:"inherit",cursor:this.canvas.dragging.state?"grabbing":"move"}},canvasGridColors:function(){return[`hsla(${this.colors["theme_light"].h}, ${this.colors["theme_light"].s}%, ${this.colors["theme_light"].l}%, ${this.grid.opacity/1.4})`,` hsla(183, 91%, 35%,${2*this.grid.opacity})`,`hsla(19, 100%, 35%, ${2*this.grid.opacity})`]},canvasGridStyle:function(){let t=2*this.grid.size,e=this.canvasSize.height+2*t,n=this.canvasSize.width+2*t;const i=(e/2+this.canvasLocation.y)%t-1*t,a=(n/2+this.canvasLocation.x)%t-1*t;return{width:this.canvasSize.width+2*this.grid.size*2,height:this.canvasSize.height+2*this.grid.size*2,y:i,x:a}}},methods:{setPrevActiveEntityID(t){console.log("I should only be called once"),this.prevActiveEntityID=t,s["default"].set(this.activeEntity,"entityID",t),s["default"].set(this.activeEntity,"selected",!0)},handleTouchEnd(t){t.preventDefault(),t.target&&this.setcanvas.dragging(),this.deactivateAllEntities(t)},updateCanvasContainerBoxLoc(){this.canvasContainerBoxLoc.x=this.$refs.canvasContainer.getBoundingClientRect().x,this.canvasContainerBoxLoc.y=this.$refs.canvasContainer.getBoundingClientRect().y},entityActivated(t,e){let n=this.activeEntity.entityID!==e;this.activeEntity.entityID=e,this.activeEntity.pressed.state=!0,setTimeout(()=>{this.activeEntity.pressed.state?(this.activeEntity.dragging.state=!0,this.activeEntity.selected=!1,this.updateCanvasContainerBoxLoc()):e===this.activeEntity.entityID&&(this.activeEntity.selected=!!n||!this.activeEntity.selected)},200)},deactivateAllEntities(t){([1].includes(t.which)||"touchend"===t.type)&&(!1===this.activeEntity.pressed.state?this.$refs.canvasContainer===t.target&&(this.activeEntity.selected=!1,this.activeEntity.entityID=void 0,this.$store.state.relClaimMode.mode&&this.$store.commit("update_relClaimMode",{mode:!1,targetID:null,claimantID:this.$store.state.relClaimMode.claimantID})):this.$refs.canvasContainer!==t.target&&(this.activeEntity.pressed.state=!1,this.activeEntity.dragging.state&&(this.activeEntity.dragging.state=!1)))},getMousePos(t){this.activeEntity.dragging.state,(this.activeEntity.dragging.state||this.canvas.dragging.state)&&("mousemove"===t.type?(s["default"].set(this.canvasMousePos,"x",t.clientX-this.canvasContainerBoxLoc.x),s["default"].set(this.canvasMousePos,"y",t.clientY-this.canvasContainerBoxLoc.y)):"touchmove"===t.type&&(s["default"].set(this.canvasMousePos,"x",t.touches[0].clientX-this.canvasContainerBoxLoc.x),s["default"].set(this.canvasMousePos,"y",t.touches[0].clientY-this.canvasContainerBoxLoc.y)),this.canvas.dragging.state&&(s["default"].set(this.canvasLocation,"x",this.canvasMousePos.x-this.canvasSize.width/2-this.canvas.dragging.deltas.x),s["default"].set(this.canvasLocation,"y",this.canvasMousePos.y-this.canvasSize.height/2-this.canvas.dragging.deltas.y)))},startCanvasDragging(t){if((t.type.startsWith("mouse")&&1===t.which||["touchend","touchstart"].includes(t.type))&&(!1!==this.canvas.dragging.state||!["mouseup","touchend"].includes(t.type))){this.updateCanvasContainerBoxLoc();let e={x:0,y:0};"mousedown"===t.type?(this.canvas.dragging.state=!0,this.canvas.dragging.event=t,e.x=t.clientX,e.y=t.clientY):t.type.startsWith("touch")&&(this.canvas.dragging.state=!0,this.canvas.dragging.event=t,e.x=t.changedTouches[0].clientX,e.y=t.changedTouches[0].clientY),this.canvas.dragging.state&&(this.canvas.dragging.deltas.x=e.x-this.canvasSize.width/2-this.canvasLocation.x-this.canvasContainerBoxLoc.x,this.canvas.dragging.deltas.y=e.y-this.canvasSize.height/2-this.canvasLocation.y-this.canvasContainerBoxLoc.y)}},endCanvasDragging(t){!(t.type.startsWith("mouse")&&1===t.which||["touchend","touchstart"].includes(t.type))||!1===this.canvas.dragging.state&&["mouseup","touchend"].includes(t.type)||(this.canvas.dragging.state=!1,this.canvas.dragging.deltas={x:0,y:0},this.canvas.dragging.event=void 0,this.canvas.dragging.deltas={x:0,y:0})},handleCanvasTap(t){t.preventDefault(),this.canvas.taps.count+=1;let e=250;this.canvas.taps.timer=setTimeout(()=>{if(this.canvas.taps.count>1){this.canvas.taps.count=0;let e={x:0,y:0};e=t.type.startsWith("mouse")?{x:t.clientX,y:t.clientY}:{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY},e.x=e.x-this.canvasSize.width/2-this.canvasLocation.x,e.y=e.y-this.canvasSize.height/2-this.canvasLocation.y,this.$emit("create-new-entity",e)}else this.canvas.taps.count=0;this.canvas.taps.timer=void 0},e)},setStartingCanvasMousePos(t){this.updateCanvasContainerBoxLoc(),"touchstart"===t.type?(this.canvasMousePos.x=t.changedTouches[0].clientX-this.canvasContainerBoxLoc.x,this.canvasMousePos.y=t.changedTouches[0].clientY-this.canvasContainerBoxLoc.y):(this.canvasMousePos.x=t.clientX-this.canvasContainerBoxLoc.x,this.canvasMousePos.y=t.clientY-this.canvasContainerBoxLoc.y)},assignTargetRelSpots(t,e){this.relClaimTargetSpots[t]?s["default"].set(this.relClaimTargetSpots[t],e,this.relClaimSpots[e]):s["default"].set(this.relClaimTargetSpots,t,{[e]:this.relClaimSpots[e]})},setSelfRelSpots(t,e){this.relClaimSpots=Object.assign({},this.relClaimSpots,{[t]:e});for(const n in this.relClaimTargetSpots)for(const i in this.relClaimTargetSpots[n])i===t&&(this.relClaimTargetSpots[n]?s["default"].set(this.relClaimTargetSpots[n],i,e):s["default"].set(this.relClaimTargetSpots,n,{[i]:e}))},removeEntity(t){let e=this.apiUrl;o()({method:"POST",url:e+"/entity/remove",data:u.a.stringify({entityID:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{this.$emit("dropEntity",t,e.data.claimantIDs),this.entitiesToUpdate=e.data.claimantIDs})},initiateProcessedEntities(){Object.keys(this.processedEntitiesBetter).forEach((t,e)=>{this.collection.Entities.some(e=>e.ID===t)||(s["default"].delete(this.processedEntitiesBetter,t),s["default"].delete(this.relClaimTargetSpots,t))}),this.collection.Entities.forEach((t,e)=>{Object.keys(this.processedEntitiesBetter).includes(t.ID)||s["default"].set(this.processedEntitiesBetter,t.ID,{dragging:{state:t.ID===this.activeEntity.entityID&&this.activeEntity.dragging.state},pressed:{state:t.ID===this.activeEntity.entityID?this.activeEntity.pressed.state:void 0},entitySelected:void 0,canvasMousePos:this.activeEntity.dragging&&this.activeEntity.entityID===t.ID?Object.assign({},this.canvasMousePos):void 0,entityLocationDef:void 0===this.collection.Entities[e]["entityLocationDef"]?{x:0,y:0}:Object.assign({},this.collection.Entities[e]["entityLocationDef"]),targetRelSpots:Object.assign({},this.relClaimTargetSpots[t.ID]),updateEntityData:!1})})},emitGetRelation(t){console.log({relationID:t}),this.$emit("getRelation",t)}},watch:{windowSize(){let t=this.$refs.canvasContainer;t?setTimeout(()=>{t=t.getBoundingClientRect(),this.canvasSize={height:t.height,width:t.width}},50):this.canvasSize={height:0,width:0}},"collection.Entities":{handler(){this.initiateProcessedEntities()},deep:!0},relClaimTargetSpots:{handler(){Object.entries(this.relClaimTargetSpots).forEach(([t,e])=>{Object.keys(this.processedEntitiesBetter).some(e=>e!==t)&&(l()(e,this.processedEntitiesBetter[t].targetRelSpots)||s["default"].set(this.processedEntitiesBetter[t],"targetRelSpots",e))})},deep:!0},activeEntity:{handler(){this.activeEntity.entityID?(this.prevActiveEntityID!==this.activeEntity.entityID&&(this.prevActiveEntityID&&Object.keys(this.processedEntitiesBetter).includes(this.prevActiveEntityID)&&(s["default"].set(this.processedEntitiesBetter[this.prevActiveEntityID],"pressed",{state:void 0}),s["default"].set(this.processedEntitiesBetter[this.prevActiveEntityID],"entitySelected",void 0)),this.prevActiveEntityID=this.activeEntity.entityID),this.activeEntity.pressed.state!==this.processedEntitiesBetter[this.activeEntity.entityID].pressed.state&&s["default"].set(this.processedEntitiesBetter[this.activeEntity.entityID],"pressed",{state:this.activeEntity.pressed.state}),s["default"].set(this.processedEntitiesBetter[this.activeEntity.entityID],"entitySelected",this.activeEntity.selected),this.activeEntity.dragging.state!==this.processedEntitiesBetter[this.activeEntity.entityID].dragging.state&&s["default"].set(this.processedEntitiesBetter[this.activeEntity.entityID],"dragging",{state:this.activeEntity.dragging.state})):Object.keys(this.processedEntitiesBetter).includes(this.prevActiveEntityID)&&(s["default"].set(this.processedEntitiesBetter[this.prevActiveEntityID],"pressed",{state:void 0}),s["default"].set(this.processedEntitiesBetter[this.prevActiveEntityID],"entitySelected",void 0))},deep:!0},canvasMousePos:{handler(){this.activeEntity.entityID&&(this.activeEntity.dragging.state?s["default"].set(this.processedEntitiesBetter[this.activeEntity.entityID],"canvasMousePos",{x:this.canvasMousePos.x-this.canvasLocation.x,y:this.canvasMousePos.y-this.canvasLocation.y}):Object.keys(this.processedEntitiesBetter).includes(this.prevActiveEntityID)&&s["default"].set(this.processedEntitiesBetter[this.prevActiveEntityID],"canvasMousePos",void 0))},deep:!0},entitiesToUpdate(){this.entitiesToUpdate.length&&(s["default"].set(this.processedEntitiesBetter[this.entitiesToUpdate[0]],"updateEntityData",!0),s["default"].delete(this.entitiesToUpdate,0))}},created:function(){},mounted:function(){let t=this.$refs.canvasContainer;t?(t=t.getBoundingClientRect(),this.canvasSize={height:t.height,width:t.width}):this.canvasSize={height:0,width:0},this.initiateProcessedEntities()},beforeUpdate:function(){},updated:function(){}},v=d,p=n("2877"),f=Object(p["a"])(v,i,a,!1,null,"498a5c02",null);e["default"]=f.exports},"73ac":function(t,e,n){var i=n("743f"),a=n("b047"),s=n("99d3"),r=s&&s.isTypedArray,o=r?a(r):i;t.exports=o},"743f":function(t,e,n){var i=n("3729"),a=n("b218"),s=n("1310"),r="[object Arguments]",o="[object Array]",c="[object Boolean]",u="[object Date]",h="[object Error]",l="[object Function]",d="[object Map]",v="[object Number]",p="[object Object]",f="[object RegExp]",g="[object Set]",y="[object String]",b="[object WeakMap]",x="[object ArrayBuffer]",_="[object DataView]",m="[object Float32Array]",E="[object Float64Array]",w="[object Int8Array]",j="[object Int16Array]",S="[object Int32Array]",C="[object Uint8Array]",D="[object Uint8ClampedArray]",z="[object Uint16Array]",O="[object Uint32Array]",I={};function P(t){return s(t)&&a(t.length)&&!!I[i(t)]}I[m]=I[E]=I[w]=I[j]=I[S]=I[C]=I[D]=I[z]=I[O]=!0,I[r]=I[o]=I[x]=I[c]=I[_]=I[u]=I[h]=I[l]=I[d]=I[v]=I[p]=I[f]=I[g]=I[y]=I[b]=!1,t.exports=P},"79bc":function(t,e,n){var i=n("0b07"),a=n("2b3e"),s=i(a,"Map");t.exports=s},"7a48":function(t,e,n){var i=n("6044"),a=Object.prototype,s=a.hasOwnProperty;function r(t){var e=this.__data__;return i?void 0!==e[t]:s.call(e,t)}t.exports=r},"7b83":function(t,e,n){var i=n("7c64"),a=n("93ed"),s=n("2478"),r=n("a524"),o=n("1fc8");function c(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype["delete"]=a,c.prototype.get=s,c.prototype.has=r,c.prototype.set=o,t.exports=c},"7b97":function(t,e,n){var i=n("7e64"),a=n("a2be"),s=n("1c3c"),r=n("b1e5"),o=n("42a2"),c=n("6747"),u=n("0d24"),h=n("73ac"),l=1,d="[object Arguments]",v="[object Array]",p="[object Object]",f=Object.prototype,g=f.hasOwnProperty;function y(t,e,n,f,y,b){var x=c(t),_=c(e),m=x?v:o(t),E=_?v:o(e);m=m==d?p:m,E=E==d?p:E;var w=m==p,j=E==p,S=m==E;if(S&&u(t)){if(!u(e))return!1;x=!0,w=!1}if(S&&!w)return b||(b=new i),x||h(t)?a(t,e,n,f,y,b):s(t,e,m,n,f,y,b);if(!(n&l)){var C=w&&g.call(t,"__wrapped__"),D=j&&g.call(e,"__wrapped__");if(C||D){var z=C?t.value():t,O=D?e.value():e;return b||(b=new i),y(z,O,n,f,b)}}return!!S&&(b||(b=new i),r(t,e,n,f,y,b))}t.exports=y},"7c64":function(t,e,n){var i=n("e24b"),a=n("5e2e"),s=n("79bc");function r(){this.size=0,this.__data__={hash:new i,map:new(s||a),string:new i}}t.exports=r},"7d1f":function(t,e,n){var i=n("087d"),a=n("6747");function s(t,e,n){var s=e(t);return a(t)?s:i(s,n(t))}t.exports=s},"7e64":function(t,e,n){var i=n("5e2e"),a=n("efb6"),s=n("2fcc"),r=n("802a"),o=n("55a3"),c=n("d02c");function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=a,u.prototype["delete"]=s,u.prototype.get=r,u.prototype.has=o,u.prototype.set=c,t.exports=u},"7ed2":function(t,e){var n="__lodash_hash_undefined__";function i(t){return this.__data__.set(t,n),this}t.exports=i},"802a":function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},"91e9":function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},"93ed":function(t,e,n){var i=n("4245");function a(t){var e=i(this,t)["delete"](t);return this.size-=e?1:0,e}t.exports=a},9520:function(t,e,n){var i=n("3729"),a=n("1a8c"),s="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",c="[object Proxy]";function u(t){if(!a(t))return!1;var e=i(t);return e==r||e==o||e==s||e==c}t.exports=u},9638:function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},"99d3":function(t,e,n){(function(t){var i=n("585a"),a=e&&!e.nodeType&&e,s=a&&"object"==typeof t&&t&&!t.nodeType&&t,r=s&&s.exports===a,o=r&&i.process,c=function(){try{var t=s&&s.require&&s.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=c}).call(this,n("62e4")(t))},"9e69":function(t,e,n){var i=n("2b3e"),a=i.Symbol;t.exports=a},a2be:function(t,e,n){var i=n("d612"),a=n("4284"),s=n("c584"),r=1,o=2;function c(t,e,n,c,u,h){var l=n&r,d=t.length,v=e.length;if(d!=v&&!(l&&v>d))return!1;var p=h.get(t);if(p&&h.get(e))return p==e;var f=-1,g=!0,y=n&o?new i:void 0;h.set(t,e),h.set(e,t);while(++f<d){var b=t[f],x=e[f];if(c)var _=l?c(x,b,f,e,t,h):c(b,x,f,t,e,h);if(void 0!==_){if(_)continue;g=!1;break}if(y){if(!a(e,(function(t,e){if(!s(y,e)&&(b===t||u(b,t,n,c,h)))return y.push(e)}))){g=!1;break}}else if(b!==x&&!u(b,x,n,c,h)){g=!1;break}}return h["delete"](t),h["delete"](e),g}t.exports=c},a524:function(t,e,n){var i=n("4245");function a(t){return i(this,t).has(t)}t.exports=a},a994:function(t,e,n){var i=n("7d1f"),a=n("32f4"),s=n("ec69");function r(t){return i(t,s,a)}t.exports=r},ac41:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}t.exports=n},b047:function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},b1e5:function(t,e,n){var i=n("a994"),a=1,s=Object.prototype,r=s.hasOwnProperty;function o(t,e,n,s,o,c){var u=n&a,h=i(t),l=h.length,d=i(e),v=d.length;if(l!=v&&!u)return!1;var p=l;while(p--){var f=h[p];if(!(u?f in e:r.call(e,f)))return!1}var g=c.get(t);if(g&&c.get(e))return g==e;var y=!0;c.set(t,e),c.set(e,t);var b=u;while(++p<l){f=h[p];var x=t[f],_=e[f];if(s)var m=u?s(_,x,f,e,t,c):s(x,_,f,t,e,c);if(!(void 0===m?x===_||o(x,_,n,s,c):m)){y=!1;break}b||(b="constructor"==f)}if(y&&!b){var E=t.constructor,w=e.constructor;E==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof w&&w instanceof w||(y=!1)}return c["delete"](t),c["delete"](e),y}t.exports=o},b218:function(t,e){var n=9007199254740991;function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}t.exports=i},b4c0:function(t,e,n){var i=n("cb5a");function a(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}t.exports=a},b5a7:function(t,e,n){var i=n("0b07"),a=n("2b3e"),s=i(a,"DataView");t.exports=s},bbc0:function(t,e,n){var i=n("6044"),a="__lodash_hash_undefined__",s=Object.prototype,r=s.hasOwnProperty;function o(t){var e=this.__data__;if(i){var n=e[t];return n===a?void 0:n}return r.call(e,t)?e[t]:void 0}t.exports=o},c05f:function(t,e,n){var i=n("7b97"),a=n("1310");function s(t,e,n,r,o){return t===e||(null==t||null==e||!a(t)&&!a(e)?t!==t&&e!==e:i(t,e,n,r,s,o))}t.exports=s},c098:function(t,e){var n=9007199254740991,i=/^(?:0|[1-9]\d*)$/;function a(t,e){var a=typeof t;return e=null==e?n:e,!!e&&("number"==a||"symbol"!=a&&i.test(t))&&t>-1&&t%1==0&&t<e}t.exports=a},c584:function(t,e){function n(t,e){return t.has(e)}t.exports=n},c869:function(t,e,n){var i=n("0b07"),a=n("2b3e"),s=i(a,"Set");t.exports=s},cb5a:function(t,e,n){var i=n("9638");function a(t,e){var n=t.length;while(n--)if(i(t[n][0],e))return n;return-1}t.exports=a},cca6:function(t,e,n){var i=n("23e7"),a=n("60da");i({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},d02c:function(t,e,n){var i=n("5e2e"),a=n("79bc"),s=n("7b83"),r=200;function o(t,e){var n=this.__data__;if(n instanceof i){var o=n.__data__;if(!a||o.length<r-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(t,e),this.size=n.size,this}t.exports=o},d327:function(t,e){function n(){return[]}t.exports=n},d370:function(t,e,n){var i=n("253c"),a=n("1310"),s=Object.prototype,r=s.hasOwnProperty,o=s.propertyIsEnumerable,c=i(function(){return arguments}())?i:function(t){return a(t)&&r.call(t,"callee")&&!o.call(t,"callee")};t.exports=c},d612:function(t,e,n){var i=n("7b83"),a=n("7ed2"),s=n("dc0f");function r(t){var e=-1,n=null==t?0:t.length;this.__data__=new i;while(++e<n)this.add(t[e])}r.prototype.add=r.prototype.push=a,r.prototype.has=s,t.exports=r},da03:function(t,e,n){var i=n("2b3e"),a=i["__core-js_shared__"];t.exports=a},dc0f:function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},dc57:function(t,e){var n=Function.prototype,i=n.toString;function a(t){if(null!=t){try{return i.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=a},e24b:function(t,e,n){var i=n("49f4"),a=n("1efc"),s=n("bbc0"),r=n("7a48"),o=n("2524");function c(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype["delete"]=a,c.prototype.get=s,c.prototype.has=r,c.prototype.set=o,t.exports=c},eac5:function(t,e){var n=Object.prototype;function i(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||n;return t===i}t.exports=i},ec69:function(t,e,n){var i=n("6fcd"),a=n("03dd"),s=n("30c9");function r(t){return s(t)?i(t):a(t)}t.exports=r},edfa:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}t.exports=n},efb6:function(t,e,n){var i=n("5e2e");function a(){this.__data__=new i,this.size=0}t.exports=a},fba5:function(t,e,n){var i=n("cb5a");function a(t){return i(this.__data__,t)>-1}t.exports=a}}]);